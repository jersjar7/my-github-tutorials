<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vector Fundamentals - Linear Algebra</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }
        
        .header h1 {
            font-size: 2.8em;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);
            color: #FFD700;
        }
        
        .header .breadcrumb {
            font-size: 1em;
            opacity: 0.8;
            margin-bottom: 15px;
        }
        
        .header .description {
            font-size: 1.2em;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .content-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .section {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .section h2 {
            font-size: 1.8em;
            margin-bottom: 20px;
            color: #FFD700;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-icon {
            font-size: 1.2em;
        }
        
        .full-width {
            grid-column: 1 / -1;
        }
        
        .canvas-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            color: #333;
        }
        
        .canvas-container h3 {
            margin-bottom: 15px;
            color: #333;
            text-align: center;
        }
        
        canvas {
            border: 2px solid #333;
            border-radius: 10px;
            display: block;
            margin: 0 auto;
            background: white;
            cursor: crosshair;
        }
        
        .controls-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .control-group {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .control-group h3 {
            margin-bottom: 15px;
            color: #FFD700;
            font-size: 1.1em;
        }
        
        .input-row {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            gap: 10px;
        }
        
        .input-row label {
            min-width: 30px;
            font-weight: 500;
        }
        
        .input-row input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 14px;
        }
        
        .input-row input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }
        
        .vector-display {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
            text-align: center;
        }
        
        .magnitude-display {
            background: rgba(76, 175, 80, 0.2);
            border: 1px solid rgba(76, 175, 80, 0.5);
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }
        
        .btn {
            padding: 10px 16px;
            border: none;
            border-radius: 20px;
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            font-size: 14px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        .btn-secondary {
            background: linear-gradient(45deg, #2196F3, #1976D2);
        }
        
        .btn-danger {
            background: linear-gradient(45deg, #f44336, #d32f2f);
        }
        
        .concept-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 15px;
            border-left: 4px solid #FFD700;
            margin-bottom: 20px;
        }
        
        .concept-explanation h4 {
            color: #FFD700;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .concept-explanation p {
            line-height: 1.6;
            margin-bottom: 10px;
        }
        
        .formula {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            text-align: center;
            margin: 10px 0;
            font-size: 1.1em;
        }
        
        .practice-section {
            background: rgba(255, 215, 0, 0.1);
            border: 1px solid rgba(255, 215, 0, 0.3);
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
        }
        
        .practice-section h3 {
            color: #FFD700;
            margin-bottom: 15px;
        }
        
        .exercise {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
        }
        
        .exercise-question {
            font-weight: 500;
            margin-bottom: 10px;
        }
        
        .exercise-input {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .three-container {
            width: 100%;
            height: 400px;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        
        @media (max-width: 1024px) {
            .content-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .controls-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .input-row {
                flex-direction: column;
                align-items: stretch;
            }
            
            .input-row label {
                min-width: auto;
            }
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="breadcrumb">ü§ñ ML Preparation ‚Ä∫ üìä Linear Algebra ‚Ä∫ üî¢ Vector Fundamentals</div>
            <h1>Vector Fundamentals</h1>
            <p class="description">
                Discover the building blocks of linear algebra! Vectors are the foundation of machine learning, representing everything from data points to gradients. Master vector operations through interactive visualization and hands-on practice.
            </p>
        </div>
        
        <div class="content-grid">
            <div class="section">
                <h2><span class="section-icon">üìê</span>2D Vector Playground</h2>
                <div class="canvas-container">
                    <h3>Interactive Vector Visualization</h3>
                    <canvas id="vector2D" width="400" height="300"></canvas>
                    <p style="font-size: 0.9em; text-align: center; margin-top: 10px; color: #666;">
                        Click and drag to create vectors. Use mouse wheel to zoom in/out.
                    </p>
                </div>
                
                <div class="controls-grid">
                    <div class="control-group">
                        <h3>Vector A</h3>
                        <div class="input-row">
                            <label>x:</label>
                            <input type="number" id="vectorA_x" placeholder="3" value="3" step="0.1">
                        </div>
                        <div class="input-row">
                            <label>y:</label>
                            <input type="number" id="vectorA_y" placeholder="2" value="2" step="0.1">
                        </div>
                        <div class="vector-display" id="vectorA_display">A = (3, 2)</div>
                        <div class="vector-display magnitude-display" id="vectorA_magnitude">|A| = 3.61</div>
                    </div>
                    
                    <div class="control-group">
                        <h3>Vector B</h3>
                        <div class="input-row">
                            <label>x:</label>
                            <input type="number" id="vectorB_x" placeholder="1" value="1" step="0.1">
                        </div>
                        <div class="input-row">
                            <label>y:</label>
                            <input type="number" id="vectorB_y" placeholder="4" value="4" step="0.1">
                        </div>
                        <div class="vector-display" id="vectorB_display">B = (1, 4)</div>
                        <div class="vector-display magnitude-display" id="vectorB_magnitude">|B| = 4.12</div>
                    </div>
                </div>
                
                <div class="button-group">
                    <button class="btn" onclick="showVectorSum()">Show A + B</button>
                    <button class="btn" onclick="showVectorDiff()">Show A - B</button>
                    <button class="btn btn-secondary" onclick="scaleVector()">Scale Vector A</button>
                    <button class="btn btn-secondary" onclick="resetZoom()">Reset Zoom</button>
                    <button class="btn btn-danger" onclick="clearVectors()">Clear All</button>
                </div>
            </div>
            
            <div class="section">
                <h2><span class="section-icon">üéØ</span>3D Vector Explorer</h2>
                <div class="three-container" id="threeContainer"></div>
                
                <div class="control-group">
                    <h3>3D Vector</h3>
                    <div class="input-row">
                        <label>x:</label>
                        <input type="number" id="vector3D_x" placeholder="2" value="2" step="0.1">
                    </div>
                    <div class="input-row">
                        <label>y:</label>
                        <input type="number" id="vector3D_y" placeholder="3" value="3" step="0.1">
                    </div>
                    <div class="input-row">
                        <label>z:</label>
                        <input type="number" id="vector3D_z" placeholder="1" value="1" step="0.1">
                    </div>
                    <div class="vector-display" id="vector3D_display">v = (2, 3, 1)</div>
                    <div class="vector-display magnitude-display" id="vector3D_magnitude">|v| = 3.74</div>
                </div>
                
                <div class="button-group">
                    <button class="btn" onclick="update3DVector()">Update Vector</button>
                    <button class="btn btn-secondary" onclick="showUnitVector()">Show Unit Vector</button>
                </div>
            </div>
        </div>
        
        <div class="content-grid">
            <div class="section">
                <h2><span class="section-icon">üßÆ</span>Vector Operations</h2>
                
                <div class="concept-explanation">
                    <h4>Vector Addition</h4>
                    <p>Add vectors component-wise: tip-to-tail method or parallelogram rule.</p>
                    <div class="formula">(a‚ÇÅ, a‚ÇÇ) + (b‚ÇÅ, b‚ÇÇ) = (a‚ÇÅ + b‚ÇÅ, a‚ÇÇ + b‚ÇÇ)</div>
                </div>
                
                <div class="concept-explanation">
                    <h4>Scalar Multiplication</h4>
                    <p>Multiply each component by the scalar. Changes magnitude, preserves (or reverses) direction.</p>
                    <div class="formula">k ¬∑ (a‚ÇÅ, a‚ÇÇ) = (k¬∑a‚ÇÅ, k¬∑a‚ÇÇ)</div>
                </div>
                
                <div class="control-group">
                    <h3>Operation Results</h3>
                    <div class="vector-display" id="result_addition">A + B = (4, 6)</div>
                    <div class="vector-display" id="result_subtraction">A - B = (2, -2)</div>
                    <div class="vector-display" id="result_scalar">2 √ó A = (6, 4)</div>
                </div>
            </div>
            
            <div class="section">
                <h2><span class="section-icon">üìè</span>Vector Magnitude</h2>
                
                <div class="concept-explanation">
                    <h4>Magnitude (Length) of a Vector</h4>
                    <p>The magnitude represents the "length" of the vector using the Pythagorean theorem.</p>
                    <div class="formula">|v| = ‚àö(x¬≤ + y¬≤ + z¬≤)</div>
                    <p>In machine learning, magnitude often represents the "strength" or "size" of a feature vector or gradient.</p>
                </div>
                
                <div class="concept-explanation">
                    <h4>Unit Vectors</h4>
                    <p>A unit vector has magnitude 1. Normalize any vector by dividing by its magnitude.</p>
                    <div class="formula">√ª = v / |v|</div>
                    <p>Unit vectors show pure direction without magnitude influence - crucial for ML optimization!</p>
                </div>
                
                <div class="control-group">
                    <h3>Magnitude Calculator</h3>
                    <div class="input-row">
                        <label>Enter vector (x, y, z):</label>
                    </div>
                    <div class="input-row">
                        <input type="number" id="mag_x" placeholder="x" value="3" step="0.1">
                        <input type="number" id="mag_y" placeholder="y" value="4" step="0.1">
                        <input type="number" id="mag_z" placeholder="z" value="0" step="0.1">
                    </div>
                    <button class="btn" onclick="calculateMagnitude()">Calculate Magnitude</button>
                    <div class="vector-display magnitude-display" id="magnitude_result">|v| = 5.00</div>
                    <div class="vector-display" id="unit_vector_result">Unit vector: (0.6, 0.8, 0.0)</div>
                </div>
            </div>
        </div>
        
        <div class="section full-width">
            <h2><span class="section-icon">üéØ</span>Practice Exercises</h2>
            <div class="practice-section">
                <h3>Test Your Understanding</h3>
                
                <div class="exercise">
                    <div class="exercise-question">1. If vector u = (2, -3) and vector v = (1, 4), what is u + v?</div>
                    <div class="exercise-input">
                        <span>Answer: (</span>
                        <input type="number" id="ex1_x" placeholder="x" style="width: 60px;">
                        <span>, </span>
                        <input type="number" id="ex1_y" placeholder="y" style="width: 60px;">
                        <span>)</span>
                        <button class="btn" onclick="checkExercise1()">Check</button>
                        <span id="ex1_result"></span>
                    </div>
                </div>
                
                <div class="exercise">
                    <div class="exercise-question">2. What is the magnitude of vector w = (3, 4, 12)?</div>
                    <div class="exercise-input">
                        <span>|w| = </span>
                        <input type="number" id="ex2_mag" placeholder="magnitude" style="width: 80px;">
                        <button class="btn" onclick="checkExercise2()">Check</button>
                        <span id="ex2_result"></span>
                    </div>
                </div>
                
                <div class="exercise">
                    <div class="exercise-question">3. If you scale vector a = (2, 1) by factor -3, what's the result?</div>
                    <div class="exercise-input">
                        <span>-3a = (</span>
                        <input type="number" id="ex3_x" placeholder="x" style="width: 60px;">
                        <span>, </span>
                        <input type="number" id="ex3_y" placeholder="y" style="width: 60px;">
                        <span>)</span>
                        <button class="btn" onclick="checkExercise3()">Check</button>
                        <span id="ex3_result"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // 2D Canvas Setup
        const canvas = document.getElementById('vector2D');
        const ctx = canvas.getContext('2d');
        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        let scale = 30;
        let zoom = 1;
        
        let vectorA = { x: 3, y: 2 };
        let vectorB = { x: 1, y: 4 };
        let showSum = false;
        let showDiff = false;
        let scalarValue = 1;
        
        // 3D Scene Setup
        let scene, camera, renderer, vector3D;
        
        function init3D() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, 400/400, 0.1, 1000);
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(400, 400);
            renderer.setClearColor(0x2a2a2a);
            document.getElementById('threeContainer').appendChild(renderer.domElement);
            
            // Add grid
            const gridHelper = new THREE.GridHelper(10, 10, 0x404040, 0x404040);
            scene.add(gridHelper);
            
            // Add axes
            const axesHelper = new THREE.AxesHelper(5);
            scene.add(axesHelper);
            
            // Create 3D vector
            update3DVector();
            
            camera.position.set(8, 6, 8);
            camera.lookAt(0, 0, 0);
            
            // Add orbit controls simulation
            let mouseDown = false;
            let mouseX = 0, mouseY = 0;
            
            renderer.domElement.addEventListener('mousedown', (e) => {
                mouseDown = true;
                mouseX = e.clientX;
                mouseY = e.clientY;
            });
            
            renderer.domElement.addEventListener('mouseup', () => {
                mouseDown = false;
            });
            
            renderer.domElement.addEventListener('mousemove', (e) => {
                if (!mouseDown) return;
                
                const deltaX = e.clientX - mouseX;
                const deltaY = e.clientY - mouseY;
                
                const spherical = new THREE.Spherical();
                spherical.setFromVector3(camera.position);
                spherical.theta -= deltaX * 0.01;
                spherical.phi += deltaY * 0.01;
                spherical.phi = Math.max(0.1, Math.min(Math.PI - 0.1, spherical.phi));
                
                camera.position.setFromSpherical(spherical);
                camera.lookAt(0, 0, 0);
                
                mouseX = e.clientX;
                mouseY = e.clientY;
            });
            
            animate3D();
        }
        
        function animate3D() {
            requestAnimationFrame(animate3D);
            renderer.render(scene, camera);
        }
        
        function update3DVector() {
            const x = parseFloat(document.getElementById('vector3D_x').value) || 0;
            const y = parseFloat(document.getElementById('vector3D_y').value) || 0;
            const z = parseFloat(document.getElementById('vector3D_z').value) || 0;
            
            // Remove existing vector
            if (vector3D) {
                scene.remove(vector3D);
            }
            
            // Create new vector arrow
            const direction = new THREE.Vector3(x, y, z);
            const origin = new THREE.Vector3(0, 0, 0);
            const length = direction.length();
            
            if (length > 0) {
                const arrowHelper = new THREE.ArrowHelper(direction.normalize(), origin, length, 0xff6b6b, length * 0.2, length * 0.1);
                scene.add(arrowHelper);
                vector3D = arrowHelper;
            }
            
            // Update displays
            document.getElementById('vector3D_display').textContent = `v = (${x.toFixed(1)}, ${y.toFixed(1)}, ${z.toFixed(1)})`;
            document.getElementById('vector3D_magnitude').textContent = `|v| = ${length.toFixed(2)}`;
        }
        
        function showUnitVector() {
            const x = parseFloat(document.getElementById('vector3D_x').value) || 0;
            const y = parseFloat(document.getElementById('vector3D_y').value) || 0;
            const z = parseFloat(document.getElementById('vector3D_z').value) || 0;
            
            const magnitude = Math.sqrt(x*x + y*y + z*z);
            if (magnitude > 0) {
                const unitX = x / magnitude;
                const unitY = y / magnitude;
                const unitZ = z / magnitude;
                
                // Temporarily show unit vector
                if (vector3D) {
                    scene.remove(vector3D);
                }
                
                const direction = new THREE.Vector3(unitX, unitY, unitZ);
                const origin = new THREE.Vector3(0, 0, 0);
                const arrowHelper = new THREE.ArrowHelper(direction, origin, 1, 0x4caf50, 0.2, 0.1);
                scene.add(arrowHelper);
                vector3D = arrowHelper;
                
                alert(`Unit vector: (${unitX.toFixed(3)}, ${unitY.toFixed(3)}, ${unitZ.toFixed(3)})`);
                
                // Restore original vector after 3 seconds
                setTimeout(() => {
                    update3DVector();
                }, 3000);
            }
        }
        
        function drawGrid() {
            ctx.strokeStyle = '#e0e0e0';
            ctx.lineWidth = 1;
            ctx.setLineDash([2, 2]);
            
            const currentScale = scale * zoom;
            const gridRange = Math.ceil(15 / zoom);
            
            // Draw grid lines
            for (let i = -gridRange; i <= gridRange; i++) {
                // Vertical lines
                ctx.beginPath();
                ctx.moveTo(centerX + i * currentScale, 0);
                ctx.lineTo(centerX + i * currentScale, canvas.height);
                ctx.stroke();
                
                // Horizontal lines
                ctx.beginPath();
                ctx.moveTo(0, centerY - i * currentScale);
                ctx.lineTo(canvas.width, centerY - i * currentScale);
                ctx.stroke();
            }
            
            ctx.setLineDash([]);
        }
        
        function drawAxes() {
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            
            // X-axis
            ctx.beginPath();
            ctx.moveTo(0, centerY);
            ctx.lineTo(canvas.width, centerY);
            ctx.stroke();
            
            // Y-axis
            ctx.beginPath();
            ctx.moveTo(centerX, 0);
            ctx.lineTo(centerX, canvas.height);
            ctx.stroke();
            
            // Axis labels
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.fillText('x', canvas.width - 20, centerY - 10);
            ctx.fillText('y', centerX + 10, 15);
        }
        
        function drawVector(vector, color, label, offset = { x: 0, y: 0 }) {
            const currentScale = scale * zoom;
            const startX = centerX + offset.x * currentScale;
            const startY = centerY - offset.y * currentScale;
            const endX = startX + vector.x * currentScale;
            const endY = startY - vector.y * currentScale;
            
            // Draw vector line
            ctx.strokeStyle = color;
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(startX, startY);
            ctx.lineTo(endX, endY);
            ctx.stroke();
            
            // Draw vector head as a dot (more reliable than arrowhead)
            ctx.fillStyle = color;
            ctx.beginPath();
            ctx.arc(endX, endY, 6, 0, 2 * Math.PI);
            ctx.fill();
            
            // Draw starting point as smaller dot
            ctx.beginPath();
            ctx.arc(startX, startY, 3, 0, 2 * Math.PI);
            ctx.fill();
            
            // Draw label
            ctx.fillStyle = color;
            ctx.font = 'bold 14px Arial';
            ctx.fillText(label, endX + 8, endY - 8);
        }
        
        function drawVectors() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawGrid();
            drawAxes();
            
            const currentScale = scale * zoom;
            
            // Draw main vectors
            drawVector(vectorA, '#ff6b6b', 'A');
            drawVector(vectorB, '#4ecdc4', 'B');
            
            if (showSum) {
                const sum = { x: vectorA.x + vectorB.x, y: vectorA.y + vectorB.y };
                drawVector(sum, '#45b7d1', 'A+B');
                
                // Draw parallelogram
                ctx.strokeStyle = 'rgba(255, 215, 0, 0.5)';
                ctx.lineWidth = 2;
                ctx.setLineDash([5, 5]);
                
                ctx.beginPath();
                ctx.moveTo(centerX + vectorA.x * currentScale, centerY - vectorA.y * currentScale);
                ctx.lineTo(centerX + sum.x * currentScale, centerY - sum.y * currentScale);
                ctx.stroke();
                
                ctx.beginPath();
                ctx.moveTo(centerX + vectorB.x * currentScale, centerY - vectorB.y * currentScale);
                ctx.lineTo(centerX + sum.x * currentScale, centerY - sum.y * currentScale);
                ctx.stroke();
                
                ctx.setLineDash([]);
            }
            
            if (showDiff) {
                const diff = { x: vectorA.x - vectorB.x, y: vectorA.y - vectorB.y };
                drawVector(diff, '#f39c12', 'A-B');
            }
        }
        
        function updateVectorDisplays() {
            const magA = Math.sqrt(vectorA.x * vectorA.x + vectorA.y * vectorA.y);
            const magB = Math.sqrt(vectorB.x * vectorB.x + vectorB.y * vectorB.y);
            
            document.getElementById('vectorA_display').textContent = `A = (${vectorA.x.toFixed(1)}, ${vectorA.y.toFixed(1)})`;
            document.getElementById('vectorA_magnitude').textContent = `|A| = ${magA.toFixed(2)}`;
            document.getElementById('vectorB_display').textContent = `B = (${vectorB.x.toFixed(1)}, ${vectorB.y.toFixed(1)})`;
            document.getElementById('vectorB_magnitude').textContent = `|B| = ${magB.toFixed(2)}`;
            
            // Update operation results
            document.getElementById('result_addition').textContent = `A + B = (${(vectorA.x + vectorB.x).toFixed(1)}, ${(vectorA.y + vectorB.y).toFixed(1)})`;
            document.getElementById('result_subtraction').textContent = `A - B = (${(vectorA.x - vectorB.x).toFixed(1)}, ${(vectorA.y - vectorB.y).toFixed(1)})`;
            document.getElementById('result_scalar').textContent = `2 √ó A = (${(2 * vectorA.x).toFixed(1)}, ${(2 * vectorA.y).toFixed(1)})`;
        }
        
        function showVectorSum() {
            showSum = !showSum;
            showDiff = false;
            drawVectors();
        }
        
        function showVectorDiff() {
            showDiff = !showDiff;
            showSum = false;
            drawVectors();
        }
        
        function scaleVector() {
            const newScale = prompt('Enter scaling factor:', '2');
            if (newScale !== null) {
                const factor = parseFloat(newScale);
                if (!isNaN(factor)) {
                    vectorA.x *= factor;
                    vectorA.y *= factor;
                    document.getElementById('vectorA_x').value = vectorA.x.toFixed(1);
                    document.getElementById('vectorA_y').value = vectorA.y.toFixed(1);
                    updateVectorDisplays();
                    drawVectors();
                }
            }
        }
        
        function resetZoom() {
            zoom = 1;
            drawVectors();
            showZoomLevel();
        }
        
        function clearVectors() {
            showSum = false;
            showDiff = false;
            vectorA = { x: 3, y: 2 };
            vectorB = { x: 1, y: 4 };
            document.getElementById('vectorA_x').value = vectorA.x;
            document.getElementById('vectorA_y').value = vectorA.y;
            document.getElementById('vectorB_x').value = vectorB.x;
            document.getElementById('vectorB_y').value = vectorB.y;
            updateVectorDisplays();
            drawVectors();
        }
        
        function calculateMagnitude() {
            const x = parseFloat(document.getElementById('mag_x').value) || 0;
            const y = parseFloat(document.getElementById('mag_y').value) || 0;
            const z = parseFloat(document.getElementById('mag_z').value) || 0;
            
            const magnitude = Math.sqrt(x*x + y*y + z*z);
            document.getElementById('magnitude_result').textContent = `|v| = ${magnitude.toFixed(2)}`;
            
            if (magnitude > 0) {
                const unitX = x / magnitude;
                const unitY = y / magnitude;
                const unitZ = z / magnitude;
                document.getElementById('unit_vector_result').textContent = `Unit vector: (${unitX.toFixed(3)}, ${unitY.toFixed(3)}, ${unitZ.toFixed(3)})`;
            } else {
                document.getElementById('unit_vector_result').textContent = 'Unit vector: undefined (zero vector)';
            }
        }
        
        // Exercise checking functions
        function checkExercise1() {
            const userX = parseFloat(document.getElementById('ex1_x').value);
            const userY = parseFloat(document.getElementById('ex1_y').value);
            const correctX = 3, correctY = 1;
            
            if (userX === correctX && userY === correctY) {
                document.getElementById('ex1_result').innerHTML = ' <span style="color: #4CAF50;">‚úì Correct!</span>';
            } else {
                document.getElementById('ex1_result').innerHTML = ' <span style="color: #f44336;">‚úó Try again</span>';
            }
        }
        
        function checkExercise2() {
            const userMag = parseFloat(document.getElementById('ex2_mag').value);
            const correctMag = 13; // sqrt(3^2 + 4^2 + 12^2) = sqrt(169) = 13
            
            if (Math.abs(userMag - correctMag) < 0.1) {
                document.getElementById('ex2_result').innerHTML = ' <span style="color: #4CAF50;">‚úì Correct!</span>';
            } else {
                document.getElementById('ex2_result').innerHTML = ' <span style="color: #f44336;">‚úó Try again</span>';
            }
        }
        
        function checkExercise3() {
            const userX = parseFloat(document.getElementById('ex3_x').value);
            const userY = parseFloat(document.getElementById('ex3_y').value);
            const correctX = -6, correctY = -3;
            
            if (userX === correctX && userY === correctY) {
                document.getElementById('ex3_result').innerHTML = ' <span style="color: #4CAF50;">‚úì Correct!</span>';
            } else {
                document.getElementById('ex3_result').innerHTML = ' <span style="color: #f44336;">‚úó Try again</span>';
            }
        }
        
        // Event listeners for input changes
        document.getElementById('vectorA_x').addEventListener('input', function() {
            vectorA.x = parseFloat(this.value) || 0;
            updateVectorDisplays();
            drawVectors();
        });
        
        document.getElementById('vectorA_y').addEventListener('input', function() {
            vectorA.y = parseFloat(this.value) || 0;
            updateVectorDisplays();
            drawVectors();
        });
        
        document.getElementById('vectorB_x').addEventListener('input', function() {
            vectorB.x = parseFloat(this.value) || 0;
            updateVectorDisplays();
            drawVectors();
        });
        
        document.getElementById('vectorB_y').addEventListener('input', function() {
            vectorB.y = parseFloat(this.value) || 0;
            updateVectorDisplays();
            drawVectors();
        });
        
        // 3D vector input listeners
        document.getElementById('vector3D_x').addEventListener('input', update3DVector);
        document.getElementById('vector3D_y').addEventListener('input', update3DVector);
        document.getElementById('vector3D_z').addEventListener('input', update3DVector);
        
        // Canvas click interaction
        canvas.addEventListener('click', function(e) {
            const rect = canvas.getBoundingClientRect();
            const currentScale = scale * zoom;
            const x = (e.clientX - rect.left - centerX) / currentScale;
            const y = -(e.clientY - rect.top - centerY) / currentScale;
            
            vectorA.x = x;
            vectorA.y = y;
            document.getElementById('vectorA_x').value = x.toFixed(1);
            document.getElementById('vectorA_y').value = y.toFixed(1);
            
            updateVectorDisplays();
            drawVectors();
        });
        
        // Mouse wheel zoom functionality
        canvas.addEventListener('wheel', function(e) {
            e.preventDefault();
            const zoomFactor = 1.1;
            
            if (e.deltaY < 0) {
                // Zoom in
                zoom *= zoomFactor;
            } else {
                // Zoom out
                zoom /= zoomFactor;
            }
            
            // Limit zoom range
            zoom = Math.max(0.2, Math.min(5, zoom));
            
            drawVectors();
            
            // Show zoom level temporarily
            showZoomLevel();
        });
        
        function showZoomLevel() {
            // Create or update zoom indicator
            let zoomIndicator = document.getElementById('zoom-indicator');
            if (!zoomIndicator) {
                zoomIndicator = document.createElement('div');
                zoomIndicator.id = 'zoom-indicator';
                zoomIndicator.style.cssText = `
                    position: absolute;
                    top: 10px;
                    right: 10px;
                    background: rgba(0, 0, 0, 0.7);
                    color: white;
                    padding: 5px 10px;
                    border-radius: 5px;
                    font-size: 12px;
                    pointer-events: none;
                    z-index: 100;
                `;
                canvas.parentElement.style.position = 'relative';
                canvas.parentElement.appendChild(zoomIndicator);
            }
            
            zoomIndicator.textContent = `Zoom: ${(zoom * 100).toFixed(0)}%`;
            zoomIndicator.style.opacity = '1';
            
            // Hide after 2 seconds
            setTimeout(() => {
                if (zoomIndicator) {
                    zoomIndicator.style.opacity = '0';
                }
            }, 2000);
        }
        
        // Initialize everything
        window.addEventListener('load', function() {
            updateVectorDisplays();
            drawVectors();
            calculateMagnitude();
            init3D();
        });
    </script>
</body>
</html>
